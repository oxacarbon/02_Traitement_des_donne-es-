---
title: "01_Projet_Aérien"
author: "Asta Ouattara"
date: "2025-05-21"
output: pdf_document
editor_options: 
  markdown: 
    wrap: 72
---

```{r setup, include=FALSE}

knitr::opts_chunk$set(echo = TRUE)

```

## Description des données

Le jeu de données flights fait partie du package nycflights13 dans R. Il
contient des informations sur tous les vols au départ de New York City
(JFK, LGA, EWR) en 2013.

Il s'agit d'un jeu de données réel fourni par le package nycflights13,
très utilisé pour apprendre à manipuler, explorer et visualiser des
données en R. Il contient les informations sur tous les vols commerciaux
qui ont quitté New York City en 2013, depuis les trois aéroports :

JFK (John F. Kennedy International)

LGA (LaGuardia)

EWR (Newark)

```{r cars}
library(dplyr)
library(nycflights13)
data("flights")

```

### Description des variables

-   year,month, day : Date du vol

-   dep_time, sched_dep_time : Heure réelle vs prévue de départ

-   sched_arr_time Heure réelle vs prévue d'arrivée

-   carrier : Code compagnie aérienne (ex: UA, DL, AA)

-   flight : Numéro de vol tailnum Immatriculation de l'avion

-   origin, dest : Aéroport de départ / d’arrivée

-   air_time : Durée du vol (en minutes)

-   distance : Distance en miles

-   hour, minute : Heures et minutes de départ programmées

-   time_hour :Timestamp arrondi à l'heure

## Exploration de la base de donnée

1.  Visualisation de la base de donnée

2.  Quelques statistiques descriptives

3.  Nombre de vols par compagnie

4.  Top 10 des vols les plus en retard

5.  Moyenne des retards par compagnies

    \## Traitement des données

6.  Application des filtres

<!-- -->

a)  Filtrer les compagnies sans valeurs manquantes
b)  Compter toute les compagnies aériennes leurs nombres de vols
c)  Calculer nombre d'heure de vol par compagnies

<!-- -->

2.  Analyse exploratoire Top 10 des vols les plus en retard top 10 des
    vols les moins en retard Top 10 des plus grandes différences (départ
    et arrivée) Calculer la différence entre les heures réelles et les
    heures prévues d'arrivée Caluler la differences entre les heures
    réelles et prévues de départ

3.  Visualisation des graphiques (02_projet_Aerien : representation
    graphique)

### Exploration de la base

```{r pressure, echo=FALSE}
library(dplyr)
glimpse(flights)
View(flights) ## Pour visualiser la base de donnée

# Aperçu de base de données
```

```{r pressure, echo=FALSE}
# Affiche les propriétes des éléments de la table
glimpse(flights)
```

```{r pressure, echo=FALSE}
# Quelques statisques exploratoire
summary(flights) 

```

```{r}
# Nombre de vols par compagnie
flights %>% count(carrier, sort = TRUE)
```

### Quelques manipulation des données

```{r}
# Top 10 des vols les plus en retard au départ
flights %>%
  arrange(desc(dep_delay)) %>%
  select(year, month, day, carrier, flight, dep_delay) %>%
  head(10)
```

```{r}
# Moyenne des retards par compagnie
flights %>%
  group_by(carrier) %>%
  summarise(mean_arr_delay = mean(arr_delay, na.rm = TRUE)) %>%
  arrange(desc(mean_arr_delay))
```

### Analyse des valeurs manquantes

```{r}
# Compter les valeurs manquantes dans chaque colonne
colSums(is.na(flights))


```

Seul les colonnes tailnum, dep_time, arr_delay , air_time ont des
valeurs manquantes

```{r}
## Exemple simple
# Nombre de valeurs manquantes par colonne
sum(is.na(flights$arr_delay)) #indique le nombre de valeur manquante dans le df flights de la colonne arr_delay

```

Bonus : Création d'une colonne total qui convertit les temps en heure

```{r}
#a)  Filtrer les compagnies sans valeurs manquantes
# On ignore les NA pour éviter les erreurs (filtrage ne enlevant les valeurs manquantes de l'heure prévue et réelle d'arrivée)
flights_tot <- flights %>%
  filter(!is.na(dep_time), !is.na(arr_time)) %>%
  mutate(heure_depart_totale = hour + minute / 60)

```

Conclusion_bonus : le nombre d'observation baisse + Rajout de la
nouvelle colonne

Filtrage des compagnies sans valeurs manquantes on ne prend que les
lignes sans valeurs manquantes dans le nouveau df

```{r}
# Supprimer les lignes avec NA dans les colonnes importantes
flights_clean <- flights_tot %>%
  filter(!is.na(arr_time), !is.na(dep_time), !is.na(arr_delay), !is.na(dep_delay))

```

Nombre de vol et nombre d'heure de vol par compagnies

```{r}
# Nombre de vols par compagnie
flights_clean %>%
  count(carrier, sort = TRUE)
```

```{r}
# Total d'heures de vol par compagnie
flights_clean %>%
  group_by(carrier) %>%
  summarise(nb_heures_vol = sum(air_time, na.rm = TRUE) / 60) %>%
  arrange(desc(nb_heures_vol))

```

Remaruque : La compagnie UA totalise le nombre de vol le plus grand

### Top 10 des vols les plus et les moins en retard

```{r}
# Top 10 des plus gros retards au départ
flights_clean %>%
  arrange(desc(dep_delay)) %>%
  select(year, month, day, carrier, flight, dep_delay) %>%
  head(10)

```

```{r}
# Top 10 des vols les moins en retard (ou en avance)
flights_clean %>%
  arrange(dep_delay) %>%
  select(year, month, day, carrier, flight, dep_delay) %>%
  head(10)

```

### Différence entre heure réelle et heure prévue d'arrivée

```{r}
# On garde les vols avec valeurs non manquantes
flights_clean <- flights_clean %>%
  mutate(diff_arr = arr_time - sched_arr_time,
         diff_dep = dep_time - sched_dep_time)

```

### Les plus grosses différences en valeurs absolues

les écarts d'arrivée

```{r}
# Top 10 des écarts à l'arrivée
flights_clean %>%
  arrange(desc(abs(diff_arr))) %>%
  select(year, month, day, carrier, flight, arr_time, sched_arr_time, diff_arr) %>%
  head(10)

```

```{r}
# Top 10 des écarts au départ
flights_clean %>%
  arrange(desc(abs(diff_dep))) %>%
  select(year, month, day, carrier, flight, dep_time, sched_dep_time, diff_dep) %>%
  head(10)

```

## Enregsitrement des resulats 





